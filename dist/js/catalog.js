(()=>{"use strict";const t=t=>{const e=document.createElement("div");e.classList.add("modal-backdrop"),e.classList.add("fade"),document.body.append(e),t.classList.add("d-block"),setTimeout((()=>{e.classList.add("show"),t.classList.add("show")}),200)},e=t=>{const e=document.querySelector(".modal-backdrop");t.classList.remove("show"),e&&e.classList.remove("show"),setTimeout((()=>{t.classList.remove("d-block"),e&&e.remove()}),200)},n=t=>fetch("http://localhost:3001"+t).then((t=>{if(!t.ok)throw new Error;return t.json()}));(()=>{const o=document.getElementById("open-auth-btn"),c=document.getElementById("open-cart-btn"),s=document.getElementById("logout-btn"),l=document.getElementById("auth-modal"),a=l.querySelectorAll(".close-btn"),d=l.querySelector(".login-btn"),r=(document.getElementById("cart-modal"),()=>{o.classList.add("d-none"),c.classList.remove("d-none"),s.classList.remove("d-none"),e(l)});o.addEventListener("click",(()=>{t(l)})),a.forEach((t=>{t.addEventListener("click",(()=>{e(l)}))})),d.addEventListener("click",(()=>{const t=l.querySelector("#login-control"),e=l.querySelector("#password-control"),o=t.value,c=e.value;n("/profile").then((t=>{t.login&&t.login===o&&t.login&&t.password===c&&(localStorage.setItem("auth",JSON.stringify(t)),r())}))})),s.addEventListener("click",(()=>{localStorage.removeItem("auth"),o.classList.remove("d-none"),c.classList.add("d-none"),s.classList.add("d-none")})),(()=>{const t=JSON.parse(localStorage.getItem("auth"));t&&n("/profile").then((e=>{e.login&&e.login===t.login&&e.login&&e.password===t.password&&r()}))})()})(),(()=>{const t=document.getElementById("products-container");(()=>{const e=window.location.search,o=new URLSearchParams(e).get("id");n(o?`/products?category=${o}`:"/products").then((e=>{(e=>{e.forEach((e=>{t.insertAdjacentHTML("beforeend",`\n            <div class="col col-12 col-sm-6 col-lg-4 col-xl-3 mb-3">\n                <a href="#" class="card-link">\n                    <div class="card">\n                        <img src="${e.preview}" class="card-img-top" alt="phone-1">\n                        <div class="card-body">\n                            <span class="mb-2 d-block text-secondary">${e.categoryName}</span>\n                            <h6 class="card-title mb-3">${e.name}</h6>\n\n                            <div class="row">\n                                <div class="col d-flex align-itemns-center justify-content-between">\n                                    <h4>${e.price} ₽</h4>\n                                    <button type="button" class="btn btn-outline-dark">\n                                        <img src="/images/icon/shopping-cart-big.svg" alt="login">\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </a>\n            </div>\n          `)}))})(e)})).catch((t=>{console.error("Произошла ошибка!")}))})()})(),(()=>{const o=document.getElementById("cart-modal"),c=o.querySelectorAll(".close-btn"),s=document.getElementById("open-cart-btn"),l=document.getElementById("cart-container");s.addEventListener("click",(()=>{n("/cart").then((e=>{(t=>{l.innerHTML="",t.forEach((t=>{l.insertAdjacentHTML("beforeend",`\n            <div class="row border-bottom pb-3 pt-3">\n                <div class="col col-12 col-md-6 mb-3 mb-md-0 fs-4">\n                    ${t.name}\n                </div>\n                <div\n                    class="col col-12 col-md-6 fs-4 d-flex align-items-center justify-content-end flex-wrap">\n                    <h4 class="me-3 d-flex align-itemns-center">${t.price*t.count} ₽</h4>\n                    <button type="button" class="btn btn-outline-dark btn-sm cart-item-controls"\n                        id="control-dec">\n                        -\n                    </button>\n                    <h6 class="cart-item-count me-3 ms-3">1</h6>\n                    <button type="button" class="btn btn-outline-dark btn-sm cart-item-controls"\n                        id="control-inc">\n                        +\n                    </button>\n                </div>\n            </div>\n\n          `)}))})(e),t(o)})).catch((t=>{console.error("Произошла ошибка!")}))})),c.forEach((t=>{t.addEventListener("click",(()=>{e(o)}))}))})()})();