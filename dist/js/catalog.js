(()=>{"use strict";const e=e=>{const t=document.createElement("div");t.classList.add("modal-backdrop"),t.classList.add("fade"),document.body.append(t),e.classList.add("d-block"),setTimeout((()=>{t.classList.add("show"),e.classList.add("show")}),200)},t=e=>{const t=document.querySelector(".modal-backdrop");e.classList.remove("show"),t&&t.classList.remove("show"),setTimeout((()=>{e.classList.remove("d-block"),t&&t.remove()}),200)},n=e=>fetch("http://localhost:3001"+e).then((e=>{if(!e.ok)throw new Error;return e.json()}));(()=>{const o=document.getElementById("open-auth-btn"),s=document.getElementById("open-cart-btn"),c=document.getElementById("logout-btn"),l=document.getElementById("auth-modal"),a=l.querySelectorAll(".close-btn"),d=l.querySelector(".login-btn"),i=document.getElementById("cart-modal"),r=()=>{o.classList.add("d-none"),s.classList.remove("d-none"),c.classList.remove("d-none"),t(l)};o.addEventListener("click",(()=>{e(l)})),a.forEach((e=>{e.addEventListener("click",(()=>{t(l)}))})),d.addEventListener("click",(()=>{const e=l.querySelector("#login-control"),t=l.querySelector("#password-control"),o=e.value,s=t.value;n("/profile").then((e=>{e.login&&e.login===o&&e.login&&e.password===s&&(localStorage.setItem("auth",JSON.stringify(e)),r())}))})),c.addEventListener("click",(()=>{localStorage.removeItem("auth"),o.classList.remove("d-none"),s.classList.add("d-none"),c.classList.add("d-none")})),s.addEventListener("click",(()=>{e(i)})),(()=>{const e=JSON.parse(localStorage.getItem("auth"));e&&n("/profile").then((t=>{t.login&&t.login===e.login&&t.login&&t.password===e.password&&r()}))})()})(),(()=>{const e=document.getElementById("products-container");n("/products").then((t=>{(t=>{t.forEach((t=>{console.log(t),e.insertAdjacentHTML("beforeend",'\n            <div class="col col-12 col-sm-6 col-lg-4 col-xl-3 mb-3">\n                <a href="#" class="card-link">\n                    <div class="card">\n                        <img src="/images/phones/phone-1.jpg" class="card-img-top" alt="phone-1">\n                        <div class="card-body">\n                            <span class="mb-2 d-block text-secondary">Смартфон</span>\n                            <h6 class="card-title mb-3">Xiaomi Redmi A1+ 2/32GB (голубой)</h6>\n\n                            <div class="row">\n                                <div class="col d-flex align-itemns-center justify-content-between">\n                                    <h4>4 990 ₽</h4>\n                                    <button type="button" class="btn btn-outline-dark">\n                                        <img src="/images/icon/shopping-cart-big.svg" alt="login">\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </a>\n            </div>\n          ')}))})(t)})).catch((e=>{console.error("Произошла ошибка!")}))})()})();